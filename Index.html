<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Terraria-Style Cycle with Fixed Speed & Logos</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #000;
    font-family: monospace;
    image-rendering: pixelated;
  }

  canvas {
    display: block;
  }

  #centerText {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: white;
    font-family: monospace;
    font-size: 2em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
  }
  #tips {
    margin-top: 10px;
  }

  #links {
    position: absolute;
    top: 10px;
    right: 10px;
    display: flex;
    gap: 10px;
  }

  .link-btn {
    display: flex;
    align-items: center;
    background: rgba(0,0,0,0.5);
    padding: 8px 12px;
    border-radius: 5px;
    color: white;
    text-decoration: none;
    font-size: 1em;
    transition: background 0.3s;
  }
  .link-btn:hover {
    background: rgba(255, 215, 0, 0.8);
  }

  .icon {
    width: 24px;
    height: 24px;
    margin-right: 8px;
    fill: white;
  }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<div id="centerText">
  <div id="timeDisplay">12:00 PM</div>
  <div id="tips">Press [E] to open your inventory.</div>
</div>

<div id="links">
  <a class="link-btn" href="https://discord.gg/WDfMupZ6xD" target="_blank" rel="noopener noreferrer">
    <!-- Discord SVG Logo -->
    <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
      <path d="M20.317 4.369c-...." /> <!-- Full Discord SVG path here -->
    </svg>
    Discord
  </a>
  <a class="link-btn" href="https://www.paypal.me/Blemmished" target="_blank" rel="noopener noreferrer">
    <!-- PayPal SVG Logo -->
    <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
      <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12..." /> <!-- Full PayPal SVG path here -->
    </svg>
    PayPal
  </a>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const timeDisplay = document.getElementById('timeDisplay');

let width = window.innerWidth;
let height = window.innerHeight;
canvas.width = width;
canvas.height = height;

window.addEventListener('resize', () => {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;
});

// Pixelate the rendering
ctx.imageSmoothingEnabled = false;

// Colors for day/night
const dayColors = {
  bgTop: '#87CEFA',
  bgBottom: '#228B22',
  sun: '#FFD700',
  moon: '#FFFFFF',
  stars: '#FFFFFF'
};
const nightColors = {
  bgTop: '#000033',
  bgBottom: '#000000',
  sun: null,
  moon: '#FFFFFF',
  stars: '#FFFFFF'
};

// Keep a normalized time: 0 to 1, 1 = 24 hours
let time = 0; // Start at midnight
const realSecondsPerGameMinute = 0.05; // 1 real second = 2 game minutes; adjust for speed

// Animate trees
const trees = [];
const treeCount = 10;
for (let i=0; i<treeCount; i++) {
  trees.push({
    x: Math.random() * width,
    swayOffset: Math.random() * Math.PI * 2,
    swaySpeed: 0.02 + Math.random() * 0.02,
    swayAmplitude: 1 + Math.random() * 2
  });
}

// Sun and moon positions
let sunX, moonX, sunY, moonY;

function animate() {
  ctx.clearRect(0, 0, width, height);

  // Update time (increment based on realSecondsPerGameMinute)
  time += (1 / (24 * 60)) * (1 / realSecondsPerGameMinute) * 0.016; // approx per frame
  if (time > 1) time -= 1;

  // Determine if day or night
  const isDay = (time >= 0.25 && time <= 0.75);

  // Background color interpolation
  const t = isDay ? (time - 0.25)/0.5 : (time + 0.25)/0.5;
  const bgTopColor = interpolateColor(dayColors.bgTop, nightColors.bgTop, isDay ? (1 - t) : t);
  const bgBottomColor = interpolateColor(dayColors.bgBottom, nightColors.bgBottom, isDay ? (1 - t) : t);
  const gradient = ctx.createLinearGradient(0, 0, 0, height/2);
  gradient.addColorStop(0, bgTopColor);
  gradient.addColorStop(1, bgBottomColor);
  ctx.fillStyle = gradient;
  ctx.fillRect(0, 0, width, height);

  // Sun and moon arc movement, slow and smooth
  const arcProgress = t;
  sunX = width * (1 - Math.cos(Math.PI * arcProgress)) / 2;
  sunY = height/2 - Math.sin(Math.PI * arcProgress) * (height/2 - 50);
  moonX = width * (1 - Math.cos(Math.PI * (1 - arcProgress))) / 2;
  moonY = height/2 - Math.sin(Math.PI * (1 - arcProgress)) * (height/2 - 50);

  // Draw sun
  if (isDay && sunX >= 0 && sunX <= width) {
    ctx.fillStyle = dayColors.sun;
    ctx.beginPath();
    ctx.arc(sunX, sunY, 20, 0, Math.PI * 2);
    ctx.fill();
  }

  // Draw moon
  if (!isDay && moonX >= 0 && moonX <= width) {
    ctx.fillStyle = nightColors.moon;
    ctx.beginPath();
    ctx.arc(moonX, moonY, 15, 0, Math.PI * 2);
    ctx.fill();
  }

  // Stars at night
  if (!isDay) {
    ctx.fillStyle = nightColors.stars;
    for (let i=0; i<50; i++) {
      ctx.fillRect(Math.random() * width, Math.random() * height/2, 1, 1);
    }
  }

  // Draw trees with more detail
  for (const tree of trees) {
    const sway = Math.sin(tree.swayOffset) * tree.swayAmplitude;
    ctx.fillStyle = '#654321'; // trunk
    ctx.fillRect(tree.x, height - 60, 4, 60);
    ctx.fillStyle = '#228B22'; // leaves
    ctx.beginPath();
    ctx.moveTo(tree.x - 8 + sway, height - 60);
    ctx.lineTo(tree.x + 4 + sway, height - 80);
    ctx.lineTo(tree.x + 16 + sway, height - 60);
    ctx.lineTo(tree.x - 8 + sway, height - 60);
    ctx.fill();
    tree.swayOffset += tree.swaySpeed;
  }
  // Update the clock in 12-hour format
  const totalMinutes = Math.floor(time * 24 * 60);
  let hour = Math.floor(totalMinutes / 60);
  const minute = totalMinutes % 60;
  const ampm = hour >= 12 ? 'PM' : 'AM';
  if (hour === 0) hour = 12;
  if (hour > 12) hour -= 12;
  const timeStr = `${String(hour).padStart(2,'0')}:${String(minute).padStart(2,'0')} ${ampm}`;
  document.getElementById('timeDisplay').textContent = timeStr;

  requestAnimationFrame(animate);
}

// Helper function
function interpolateColor(c1, c2, factor) {
  const rgb1 = hexToRgb(c1);
  const rgb2 = hexToRgb(c2);
  const r = Math.round(rgb1.r + (rgb2.r - rgb1.r) * factor);
  const g = Math.round(rgb1.g + (rgb2.g - rgb1.g) * factor);
  const b = Math.round(rgb1.b + (rgb2.b - rgb1.b) * factor);
  return `rgb(${r},${g},${b})`;
}
function hexToRgb(hex) {
  hex = hex.replace('#','');
  if (hex.length === 3) hex = hex.split('').map(c => c + c).join('');
  const num = parseInt(hex, 16);
  return {
    r: (num >> 16) & 255,
    g: (num >> 8) & 255,
    b: num & 255
  };
}

// Start animation
animate();
</script>
</body>
</html>
