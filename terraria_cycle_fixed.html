<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Terraria-Style Day/Night Cycle</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #000;
    font-family: 'Courier New', monospace;
    image-rendering: pixelated;
  }

  canvas {
    display: block;
  }

  #centerText {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: white;
    font-family: 'Courier New', monospace;
    font-size: 2em;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.9);
    pointer-events: none;
  }
  #tips {
    margin-top: 10px;
    font-size: 0.6em;
  }

  #links {
    position: absolute;
    top: 10px;
    right: 10px;
    display: flex;
    gap: 10px;
    z-index: 100;
  }

  .link-btn {
    display: flex;
    align-items: center;
    background: rgba(0,0,0,0.7);
    padding: 8px 12px;
    border-radius: 5px;
    color: white;
    text-decoration: none;
    font-size: 1em;
    transition: all 0.3s;
    border: 2px solid transparent;
  }
  .link-btn:hover {
    background: rgba(255, 215, 0, 0.3);
    border-color: #FFD700;
    transform: scale(1.05);
  }

  .icon {
    width: 24px;
    height: 24px;
    margin-right: 8px;
  }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<div id="centerText">
  <div id="timeDisplay">12:00 PM</div>
  <div id="tips">Press [E] to open your inventory.</div>
</div>

<div id="links">
  <a class="link-btn" href="https://discord.gg/WDfMupZ6xD" target="_blank" rel="noopener noreferrer">
    <svg class="icon" viewBox="0 0 127.14 96.36" xmlns="http://www.w3.org/2000/svg" fill="#5865F2">
      <path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/>
    </svg>
    Discord
  </a>
  <a class="link-btn" href="https://www.paypal.me/Blemmished" target="_blank" rel="noopener noreferrer">
    <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#00457C">
      <path d="M20.067 8.478c.492.88.556 2.014.3 3.327-.74 3.806-3.276 5.12-6.514 5.12h-.5a.805.805 0 00-.79.679l-.845 5.36a.605.605 0 01-.597.51H8.943a.39.39 0 01-.384-.447l1.367-8.66a.805.805 0 01.79-.679h2.058c4.688 0 7.82-2.285 8.293-6.71zM9.265 8.155h3.714c1.097 0 2.06.104 2.845.345.197.061.383.13.559.206.732.318 1.295.854 1.608 1.633.235.585.326 1.287.274 2.13-1.07 5.474-4.914 7.315-9.284 7.315H6.93c-.431 0-.792.325-.84.752L5.151 26.3a.542.542 0 01-.535.458H.925a.39.39 0 01-.384-.447L3.124 9.065c.046-.425.407-.75.84-.75h4.527c.31 0 .565.235.597.534l.177 1.306z"/>
    </svg>
    PayPal
  </a>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const timeDisplay = document.getElementById('timeDisplay');

let width = window.innerWidth;
let height = window.innerHeight;
canvas.width = width;
canvas.height = height;

window.addEventListener('resize', () => {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;
  generateTrees();
});

ctx.imageSmoothingEnabled = false;

// Time system - 0 = midnight, 0.5 = noon
let time = 0.25; // Start at dawn (6 AM)
const realSecondsPerGameMinute = 0.05; // Speed control

// Minecraft tips
const minecraftTips = [
  "Never dig straight down!",
  "Torches prevent mob spawns in a 7-block radius.",
  "You can use a water bucket to safely descend from heights.",
  "Creepers are afraid of cats.",
  "Coal and charcoal work the same in furnaces.",
  "Sleep in a bed to set your spawn point.",
  "Right-click on sheep with shears to get wool without killing them.",
  "F3 shows your coordinates and other debug information.",
  "Craft a shield with 1 iron ingot and 6 planks.",
  "You can breed animals by feeding them their favorite food.",
  "A Fortune pickaxe gives you more diamonds per ore.",
  "Combine two damaged tools in a crafting table to repair them.",
  "Lava buckets are the longest-lasting furnace fuel.",
  "Crouch to prevent falling off edges.",
  "Use bone meal on crops to instantly grow them.",
  "Zombies drop iron ingots, carrots, and potatoes.",
  "Light levels below 7 allow hostile mobs to spawn.",
  "You can place torches on the side of glass blocks.",
  "Trading with villagers can get you enchanted diamond gear.",
  "The Nether has a 1:8 distance ratio with the Overworld.",
  "Efficiency enchantment makes tools mine faster.",
  "You can craft TNT with 5 gunpowder and 4 sand.",
  "Ender pearls teleport you where they land.",
  "Milk removes all potion effects, good and bad.",
  "You can waterlog stairs, slabs, and fences.",
  "Golden apples cure zombie villagers when combined with weakness potion.",
  "Beds explode in the Nether and End dimensions.",
  "Silk Touch lets you collect ore blocks instead of their drops.",
  "You can fish up treasure with an enchanted fishing rod.",
  "Placing carpet on top of a fence prevents mobs from jumping over.",
  "Mending enchantment repairs items using experience orbs.",
  "You can dye leather armor any color you want.",
  "Pumpkins can be worn as helmets to avoid Enderman aggression.",
  "Redstone torches can power blocks and create circuits.",
  "Anvils can combine enchantments from two items.",
  "Soul sand slows movement but creates bubble columns underwater.",
  "Cobwebs slow falling and prevent fall damage.",
  "You can tame wolves with bones and tame cats with raw fish.",
  "Lodestones let compasses point to specific locations.",
  "Blaze rods are essential for brewing potions and finding strongholds.",
  "Diamond gear can be upgraded to Netherite for better stats.",
  "Spectral arrows create a glowing effect on hit targets.",
  "Respawn anchors let you set spawn points in the Nether.",
  "Composters turn crops into bone meal over time.",
  "Name tags prevent mobs from despawning."
];

let currentTipIndex = 0;
let lastTipChange = Date.now();

// Real-world time tracking
function updateRealTime() {
  const now = new Date();
  let hour = now.getHours();
  const minute = now.getMinutes();
  const ampm = hour >= 12 ? 'PM' : 'AM';
  if (hour === 0) hour = 12;
  if (hour > 12) hour -= 12;
  timeDisplay.textContent = `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')} ${ampm}`;
}

// Generate trees
function generateTrees() {
  trees.length = 0;
  const treeCount = 15;
  const spacing = width / treeCount;
  for (let i = 0; i < treeCount; i++) {
    trees.push({
      x: spacing * i + spacing / 2 + (Math.random() - 0.5) * 30,
      height: 80 + Math.random() * 40,
      width: 15 + Math.random() * 10,
      swayOffset: Math.random() * Math.PI * 2,
      swaySpeed: 0.01 + Math.random() * 0.01
    });
  }
}

const trees = [];
generateTrees();

// Stars (fixed positions for night)
const stars = [];
for (let i = 0; i < 100; i++) {
  stars.push({
    x: Math.random() * width,
    y: Math.random() * (height * 0.6),
    size: Math.random() * 2,
    twinkle: Math.random() * Math.PI * 2
  });
}

function drawTerrariaSun(x, y, radius) {
  // Main sun body with gradient
  const sunGradient = ctx.createRadialGradient(x, y, 0, x, y, radius);
  sunGradient.addColorStop(0, '#FFF8DC');
  sunGradient.addColorStop(0.4, '#FFD700');
  sunGradient.addColorStop(1, '#FFA500');
  
  ctx.fillStyle = sunGradient;
  ctx.beginPath();
  ctx.arc(x, y, radius, 0, Math.PI * 2);
  ctx.fill();
  
  // Sun rays
  ctx.strokeStyle = '#FFD700';
  ctx.lineWidth = 2;
  const rayCount = 12;
  const rayLength = radius * 0.6;
  
  for (let i = 0; i < rayCount; i++) {
    const angle = (Math.PI * 2 * i) / rayCount;
    const startX = x + Math.cos(angle) * (radius + 3);
    const startY = y + Math.sin(angle) * (radius + 3);
    const endX = x + Math.cos(angle) * (radius + rayLength);
    const endY = y + Math.sin(angle) * (radius + rayLength);
    
    ctx.beginPath();
    ctx.moveTo(startX, startY);
    ctx.lineTo(endX, endY);
    ctx.stroke();
  }
  
  // Inner glow
  ctx.fillStyle = 'rgba(255, 255, 220, 0.3)';
  ctx.beginPath();
  ctx.arc(x, y, radius * 1.5, 0, Math.PI * 2);
  ctx.fill();
}

function drawTerrariaMoon(x, y, radius) {
  // Main moon body
  const moonGradient = ctx.createRadialGradient(x - 3, y - 3, 0, x, y, radius);
  moonGradient.addColorStop(0, '#FFFFFF');
  moonGradient.addColorStop(0.6, '#E8E8E8');
  moonGradient.addColorStop(1, '#C0C0C0');
  
  ctx.fillStyle = moonGradient;
  ctx.beginPath();
  ctx.arc(x, y, radius, 0, Math.PI * 2);
  ctx.fill();
  
  // Craters
  ctx.fillStyle = 'rgba(160, 160, 160, 0.4)';
  ctx.beginPath();
  ctx.arc(x - 4, y - 3, 3, 0, Math.PI * 2);
  ctx.fill();
  
  ctx.beginPath();
  ctx.arc(x + 3, y + 2, 2, 0, Math.PI * 2);
  ctx.fill();
  
  ctx.beginPath();
  ctx.arc(x - 1, y + 4, 2, 0, Math.PI * 2);
  ctx.fill();
  
  // Moon glow
  ctx.fillStyle = 'rgba(220, 220, 255, 0.2)';
  ctx.beginPath();
  ctx.arc(x, y, radius * 1.4, 0, Math.PI * 2);
  ctx.fill();
}

function drawTree(tree, sway) {
  const treeX = tree.x;
  const treeBottom = height - 20;
  const treeTop = treeBottom - tree.height;
  
  // Tree trunk
  ctx.fillStyle = '#6B4423';
  ctx.fillRect(treeX - tree.width / 4, treeTop, tree.width / 2, tree.height);
  
  // Trunk shading
  ctx.fillStyle = '#4A2F1A';
  ctx.fillRect(treeX, treeTop, tree.width / 4, tree.height);
  
  // Leaves - layered triangles for depth
  const leafColors = ['#2D5016', '#3A6B1F', '#4A8526'];
  const leafLayers = 4;
  
  for (let i = 0; i < leafLayers; i++) {
    const layerY = treeTop + (i * 15);
    const layerWidth = tree.width * 2.5 - (i * 8);
    ctx.fillStyle = leafColors[i % leafColors.length];
    
    ctx.beginPath();
    ctx.moveTo(treeX - layerWidth / 2 + sway, layerY + 25);
    ctx.lineTo(treeX + sway, layerY - 10);
    ctx.lineTo(treeX + layerWidth / 2 + sway, layerY + 25);
    ctx.closePath();
    ctx.fill();
  }
  
  // Top leaves (pointy)
  ctx.fillStyle = '#4A8526';
  ctx.beginPath();
  ctx.moveTo(treeX - 15 + sway, treeTop);
  ctx.lineTo(treeX + sway, treeTop - 25);
  ctx.lineTo(treeX + 15 + sway, treeTop);
  ctx.closePath();
  ctx.fill();
}

function animate() {
  ctx.clearRect(0, 0, width, height);
  
  // Update time
  time += (1 / (24 * 60)) * (1 / realSecondsPerGameMinute) * 0.016;
  if (time > 1) time -= 1;
  
  // Update Minecraft tip every 8 seconds
  const currentTime = Date.now();
  if (currentTime - lastTipChange > 8000) {
    currentTipIndex = (currentTipIndex + 1) % minecraftTips.length;
    document.getElementById('tips').textContent = minecraftTips[currentTipIndex];
    lastTipChange = currentTime;
  }
  
  // Update real-world time
  updateRealTime();
  
  // Day is from 0.25 (6 AM) to 0.75 (6 PM)
  const isDay = (time >= 0.25 && time <= 0.75);
  
  // Calculate transition factor
  let transitionFactor = 0;
  if (time < 0.25) {
    transitionFactor = 1 - (time / 0.25);
  } else if (time <= 0.75) {
    transitionFactor = 0;
  } else {
    transitionFactor = (time - 0.75) / 0.25;
  }
  
  // Sky colors
  const dayTopColor = { r: 135, g: 206, b: 250 };
  const dayBottomColor = { r: 176, g: 224, b: 230 };
  const nightTopColor = { r: 10, g: 10, b: 50 };
  const nightBottomColor = { r: 20, g: 20, b: 40 };
  
  const topColor = {
    r: Math.round(dayTopColor.r + (nightTopColor.r - dayTopColor.r) * transitionFactor),
    g: Math.round(dayTopColor.g + (nightTopColor.g - dayTopColor.g) * transitionFactor),
    b: Math.round(dayTopColor.b + (nightTopColor.b - dayTopColor.b) * transitionFactor)
  };
  
  const bottomColor = {
    r: Math.round(dayBottomColor.r + (nightBottomColor.r - dayBottomColor.r) * transitionFactor),
    g: Math.round(dayBottomColor.g + (nightBottomColor.g - dayBottomColor.g) * transitionFactor),
    b: Math.round(dayBottomColor.b + (nightBottomColor.b - dayBottomColor.b) * transitionFactor)
  };
  
  // Draw sky gradient
  const gradient = ctx.createLinearGradient(0, 0, 0, height);
  gradient.addColorStop(0, `rgb(${topColor.r},${topColor.g},${topColor.b})`);
  gradient.addColorStop(0.7, `rgb(${bottomColor.r},${bottomColor.g},${bottomColor.b})`);
  gradient.addColorStop(1, `rgb(${bottomColor.r},${bottomColor.g},${bottomColor.b})`);
  ctx.fillStyle = gradient;
  ctx.fillRect(0, 0, width, height);
  
  // Stars at night
  if (transitionFactor > 0.2) {
    const starOpacity = Math.min((transitionFactor - 0.2) * 1.5, 1);
    stars.forEach(star => {
      const twinkle = Math.sin(star.twinkle + time * 10) * 0.3 + 0.7;
      ctx.fillStyle = `rgba(255, 255, 255, ${starOpacity * twinkle})`;
      ctx.fillRect(star.x, star.y, star.size, star.size);
    });
  }
  
  // Calculate celestial positions (arc across sky)
  const celestialProgress = (time < 0.25) ? (time + 0.75) : (time - 0.25);
  const normalizedProgress = celestialProgress / 0.5;
  
  const arcStartX = width * 0.1;
  const arcEndX = width * 0.9;
  const arcPeakY = height * 0.15;
  const arcBottomY = height * 0.7;
  
  const celestialX = arcStartX + (arcEndX - arcStartX) * normalizedProgress;
  const celestialY = arcBottomY - Math.sin(normalizedProgress * Math.PI) * (arcBottomY - arcPeakY);
  
  // Draw sun during day (moves left to right)
  if (time >= 0.25 && time <= 0.75) {
    const sunProgress = (time - 0.25) / 0.5;
    const sunX = width * sunProgress;
    const sunY = height * 0.2;
    drawTerrariaSun(sunX, sunY, 17.5);
  }
  
  // Draw moon during night (moves left to right)
  if (time < 0.25 || time > 0.75) {
    let moonProgress;
    if (time > 0.75) {
      moonProgress = (time - 0.75) / 0.5; // 0.75 to 1.0 maps to 0 to 0.5
    } else {
      moonProgress = 0.5 + (time / 0.25) * 0.5; // 0 to 0.25 maps to 0.5 to 1.0
    }
    const moonX = width * moonProgress;
    const moonY = height * 0.2;
    drawTerrariaMoon(moonX, moonY, 15);
  }
  
  // Ground - fill entire bottom portion
  const grassColor = isDay ? '#2D5016' : '#1A3010';
  const dirtColor = isDay ? '#8B6914' : '#5A4610';
  
  // Fill from bottom up with dirt base
  ctx.fillStyle = dirtColor;
  ctx.fillRect(0, height - 20, width, 20);
  
  // Add grass layer on top
  ctx.fillStyle = grassColor;
  ctx.fillRect(0, height - 20, width, 5);
  
  // Draw trees
  trees.forEach(tree => {
    const sway = Math.sin(tree.swayOffset) * 2;
    drawTree(tree, sway);
    tree.swayOffset += tree.swaySpeed;
  });
  
  requestAnimationFrame(animate);
}

// Initialize tip display
document.getElementById('tips').textContent = minecraftTips[0];

animate();
</script>
</body>
</html>